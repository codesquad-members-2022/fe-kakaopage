# fe-kakaopage

# step1

HTML CSS 연습
둘다 거의 처음 사용하는 것이라 의도적으로 연습에 포커스를 두었다.
많은 리팩토링 필요. mission2에서 JS로 반복되는 HTML부분을 만들고 관리해보자.

# step2
깜빡했네..

# step3

## 주요 작업 내용
1.  HTML의 각 부분들을 컴포넌트화 
    -   JS에서 DOM 조작을 용이하게 하기 위함
    -   재사용하기 위함
2.  data파일 생성
    -   JSON으로 하려했지만 익숙치 않아 일단 JS파일로 생성 --> 다음 step까지 JSON으로 변경하는 것이 목표
    -   컴포넌트 별로 필요한 데이터파일을 분리하는 것을 기본으로함
    -   작품들이 들어있는 section의 경우 양이 많고, 분기가 많기 때문에 별도의 works 폴더에 분리(컴포넌트도 마찬가지)
    -   컴포넌트를 생성할 때 필요한 데이터파일 뿐만 아니라, 상위 탭을 클릭했을 때 바뀌는 하위 컴포넌트의 목록(flow?) 또한 데이터파일로 설정 --> 아래 구조가 다르더라도 데이터 파일을 읽어 하나의 함수로 re-rendering을 수행하기 위함.
3.  render.js파일 작성
    -   각 DOM을 render하는 함수는 템플릿 리터럴을 작성하는 각 component 파일에 있고, 이것을 모아서 적절하게 사용하는 역할. 

## 수정이 필요한 사항
1.  함수 합치기
    -   render.js에서 이벤트를 부여하는 activate~~~ 함수는 모양이 거의 동일하다. 
    -   CSS 클래스 명을 재정리해서 input argument에 따라 적절한 클래스명이 자동으로 삽입되게 하거나, render()함수처럼 분기를 안에 설정하여 합치는 것이 유지보수 차원에서 유리할 것 같다.  
2.  빠른 클릭 방지
    -   빠르게 탭을 클릭하면 버그가 쉽게 발생한다. 아마 클래스를 넣었다 뺐다 하는 과정이 느려서 그런것 같은데 해결하는 방법을 찾아 수정해야겠다. 일정양의 클릭은 하나의 클릭으로 간주하는 방법이 있다고 들은 것 같다. 

## 고민 사항
0.  렌더링 방식
    -   지금은 각 컴포넌트 함수에서 템플릿 리터럴을 만들어주면 그것을 innerHTML로 꽂아넣는 방식이 대부분이다. 
    -   insert~~메서드도 사용하고 있지만 결국 DOM자체를 교체하는 것은 동일하다.
    -   탭으로 인해 전체 페이지 구조가 바뀔 때는 어쩔수 없을 것 같지만, 요일 탭의 경우 틀이 동일하다면 안의 컨텐츠만 바꿔주는게 좋지 않을까?
    -   그런데 그렇게 하기에는 일일히 li요소에 접근해 이미지 경로, 제목, 정보 등을 바꿔주는 것이 너무 번거롭고 그리 효율적일 것 같지도 않다는 생각을 (감히)했다.
    -   다만, 슬라이드의 경우 이미지 src나 일부 정보만 바꾸는 것이 효율적일 것 같다. 

1.  역할 분리
    -   render.js가 각 컴포넌트들의 render함수들을 모아 실행시키는 역할, 이벤트리스너를 달아주는 역할 두가지를 하고 있다. render.js라는 파일 이름으로 보면 이벤트를 부여하는 역할은 분리하는 것이 좋을 것 같은데 문제는 이벤트가 render 함수를 사용해야한다는것... 그래서 일단은 합쳐두었다

2.  컴포넌트 분리, 함수 쪼개기
    -   이번에는 코드를 작성하면서 하나의 함수가 많은 역할을 하는 경우가 많다고 느꼈다.
    -   함수를 의도적으로 작개 쪼개는 연습을 해야겠다.
    -   컴포넌트 또한 공통 요소를 뽑아 분리할 수 있을것 같은데 너무 작게 분리하면 오히려 사용하기가 상당히 까다로워졌다. 내가 잘못 나눈 것인지 아니면 사용이 서툴러서 그런지 그것도 아니면 나눌 필요가 없었던건지... 상황에 따라 필요성을 논리적으로 잘 따져봐야겠다.

3. 데이터
    -   데이터 분리 및 관리가 상당히 힘들다. 주로 장르로 구분을 짓고 그 안에서 세부 분기(요일)이 또 있으면 추가로 나누는 식으로 했는데, 양이 많으니 관리가 어렵고 사용도 헷갈린다. 
    DB를 사용하는 이유가 이건가

### 계획
1. 페이지의 나머지 부분도 컴포넌트화 하여 렌더링하기
2. JSON 사용
3. 비동기 처리(현재 어떤식으로 동작하는지 정확히 알지 못한다. 적절히 비동기를 사용하면 사용자경험이 더 좋지 않을까?)
3. 슬라이드 동작 구현
4. 많은 버그들 수정.


# Step4

## 주요 작업 내용
1. 슬라이드 기능 구현 --> 현재 mouseover, mouseleave시 자동 슬라이드가 멈추게 되어있는데 재귀적으로 구현하여 마우스를 여러번 넣다 뺐다하면 스택이 계속 쌓이는 버그가 있음. 수정 필요
2. banner, slide등 여러 곳에서 사용하는 컴포넌트들 리팩토링

## 고민했던 것, 어려웠던 것
1. 슬라이드 
    -   3장의 content만 미리 불러오는 방식으로 구현했는데, 그 이유는 content의 수가 아주 많을 경우 전부를 미리 불러오는 것은 비효율적이라고 생각했기 때문입니다. 그러나 제가 선택한 방식의 경우 한번 슬라이드를 넘길때마다 매번 request를 다시 보내야한다는 단점이 있습니다. 
    -   transitionend 이벤트를 등록해 슬라이드가 전부 이동된 다음 DOM을 업데이트하기 때문에 한번에 여러장을 넘기지 못합니다. 오리지널 카카오페이지에서도 한번에 하나의 슬라이드만 넘길 수 있도록 되어있지만 만약 정보를 빠르게 스킵해야하는(뭔가를 찾는다거나..) 상황에서는 위와같은 방식은 좋지않은 사용자 경험을 줄수 있다고 생각합니다.

2. 컴포넌트화
    -   이번 미션을 하며 크게 banner와 slide를 컴포넌트화 하여 사용했습니다. step3까지는 banner와 slide가 분리되어 있었음에도 레이아웃을 그려주는 역할정도만 하고 그것을 핸들링하는 것은 각 컴포넌트를 사용하는 다른 컴포넌트에서 일일히 수행해주었습니다.
    -   예를 들어 slide의 버튼을 클릭했을 때 발생하는 동작들을 mainBanner에서 mainBanner용으로 정의하여 사용했었습니다. 이것을 slide에 추상화하여 정의하고 mainBanner에서는 추상화된 함수에 인자들을 넘겨 사용하는 방식으로 수정했습니다.
    -   어려웠던 점은, 추상화가 된것을 구체적으로 사용하려 할때 너무 많은 인자를 넘겨줘야했습니다. slide의 activateSlide를 사용하기 위해서는 3개의 인자가 필요하고 그것을 가공하다가 마지막에는 4개의 인자가 필요한 함수가 존재합니다.
    인자의 개수가 많아지면 직관적이지 못하고 관리하기가 힘들어 최대한 줄이고 싶은데 쉽지 않았습니다. 인자들을 관리하는 데이터구조를 만드는 것이 좋을까 생각했지만, 시간관계상 수행하지 못했습니다.

3. 함수 분리, 인자 전달
    -   이번에 짠 코드는 전반적으로 함수를 잘게 쪼개지 못한것 같아 아쉽습니다.
    -   소코반때를 생각해보면, 함수를 잘게 쪼갰을때는 유지보수가 쉽고, 함수명으로 인해서 로직의 흐름을 이해하기 쉬워지는 등의 장점이 있었는데, 이번에는 그러지 못해서 로직의 흐름이 직관적이지 못한것 같습니다.
    -   계속 코드를 다듬다가 쓸데 없이 저수준(?)의 인자를 전달하는 경우가 많다는 것을 깨달았습니다. 예를들면, mainBanner의 renderMainBanner는 genre값을 받는데 이것을 계속 다음, 다음, 다음 함수로 전달하고 있다가 마지막에 bannerData로 바꿔서 사용했습니다. 쓸데없이 저수준의 인자를 계속 전달하다가 마지막에 실제 사용하는 데이터로 바꾸려면 mainBanner에 종속되어 있어야하기 때문에 컴포넌트로 분리하는 것을 어렵게 만든다는 것을 깨달았습니다. 그래서 가능하면 최대한 빨리 구체적인 데이터로 만들어 넘겨주는 방식을 선택했습니다. 

## 미션 정리

1. 갈길이 멀지만 그래도 HTML, CSS도 거의 할줄 모르던 2주전에 비해 많이 성장했다고 느낍니다. 
2. 처음 설계의 중요성, 함수를 잘게 쪼개는 것의 중요성을 직접 코드를 작성하며 느꼈습니다.
3. JSON을 사용하면 fetch를 해야하고 그럼 비동기관리를 해줘야한다는데 그것을 하지 못해 아쉽습니다. 주말동안 JSON을 건드려볼 예정입니다.

### 못다한 여러 내용은 회고로 작성하기.
